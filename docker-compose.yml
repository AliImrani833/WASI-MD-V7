version: '3.8'

services:
  wasi-md-bot:
    image: mrwasi/wasi-md-v7:latest
    container_name: wasi-md-bot
    restart: unless-stopped
    
    ports:
      - "3000:3000"
    
    environment:
      # Required
      - MONGODB_URI=${MONGODB_URI}
      - SESSION_ID=${SESSION_ID}
      - OWNER_NUMBER=${OWNER_NUMBER}
      
      # Optional
      - BOT_NAME=${BOT_NAME:-WASI BOT}
      - OWNER_NAME=${OWNER_NAME:-MR WASI}
      - PREFIX=${PREFIX:-.}
      - MODE=${MODE:-public}
      - AUTO_READ=${AUTO_READ:-false}
      - AUTO_TYPING=${AUTO_TYPING:-false}
      - ALWAYS_ONLINE=${ALWAYS_ONLINE:-true}
      - TIME_ZONE=${TIME_ZONE:-Asia/Karachi}
    
    volumes:
      - wasi_data:/app/auth_info
      - wasi_temp:/app/temp
    
    healthcheck:
      test: ["CMD", "node", "-e", "console.log('healthy')"]
      interval: 30s
      timeout: 10s
      retries: 3
      start_period: 10s

volumes:
  wasi_data:
  wasi_temp:
